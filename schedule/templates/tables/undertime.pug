//- view: schUndertimeList


script(type='text/hyperscript').
   {% include 'hs/empl-assigner-button._hs' %}

script(type='text/hyperscript').
   {% include 'hs/empl-hours-badge._hs' %}



- var weeknums = ["0","1","2","3","4","5"]

div.container.overflow-x-auto

   .px-2.mx-3.flex.flex-row.overflow-auto.bg-zinc-900.bg-opacity-75.rounded.p-3(class="w-[600px] lg:w-[950px]")

      each empl in employees

         .bg-zinc-100.bg-opacity-40.rounded.p-2.mx-3

            - var e          = employees[empl]
            - var profileImg = e['img_url']
            - var weeks      = employees[empl]['weeks']
            - var fte        = employees[empl]['fte']
            - var prds       = employees[empl]['periods']

            .flex.flex-row
            
               img.w-16.h-16.border.rounded-lg(src=profileImg)

               .flex.flex-col.w-40

                  div.font-thin.text-lg.px-2= empl
                  div.flex.flex-row
                  
                     - var pd_idx = 0

                     each pd in prds

                        - var pd_fte = fte * 80

                        if pd < pd_fte
                           .cursor-pointer.bg-red-300.text-xs.pt-1.text-red-900.font-bold.rounded-full.h-7.w-7.ring.ring-red-700.border(
                              id= "undertime-badge-#{empl}-#{pd_idx}"
                              hx-get= "undertime-partial/#{empl}/#{pd_idx}/"
                              hx-target= "#under-hours-swap-area"
                           )= pd 

                        else
                           .bg-zinc-300.text-xs.pt-1.text-zinc-900.text-center.font-bold.rounded-full.h-7.w-7.ring.ring-zinc-700.border.border-green-500
                              i.fas.fa-check.text-green-800

                        - var pd_idx = pd_idx + 1
      
div(id="under-hours-swap-area")    

   

