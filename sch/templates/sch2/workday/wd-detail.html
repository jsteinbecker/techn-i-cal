{% extends 'base.html' %}
{% load tags %}

<head>
    <style>
        {% include 'sch/css/_wikitable.css' %}
    </style>

</head>

<!----------------------------
TEMPLATE VARIABLES
    *   workday
------------------------------>

{% block content %}

   

    
    
    <div class="vstack center items-center">
        <div class="hstack text center-text">
            <a class="mr-20" href="{{workday.prevWD.url}}"> {%backArrow%} </a>
            <h1 class="text-3xl"> <span class="bg-orange-400 rounded px-1 m-2 mr-3 text-slate-900 jbm">{{ workday.wkd }}</span>{{workday}} </h1>
            <a class="ml-20" href="{{workday.nextWD.url}}"> {%forwardArrow%} </a>
        </div> 
        <div class="hstack">
            <a href="{{workday.week.url}}" class="rounded-md p-5 hover:bg-blue-800 text text-center vstack text-center">
                <div class="text-2xs text-gray-400">WEEK</div>
                <div class="text-xl text-blue-200">{{workday.week.number}}</div>
            </a>
            <a href="{{workday.period.url}}" class="rounded-md p-5 hover:bg-indigo-800 text text-center vstack text-center"">
                <div class="text-2xs text-gray-400">PAY PERIOD</div>
                <div class="text-xl text-indigo-200">{{workday.period.number}}</div>
            </a>
            <a href="{{workday.schedule.url}}" class="rounded-md p-5 hover:bg-purple-800 text text-center vstack text-center">
                <div class="text-2xs text-gray-400">SCHEDULE</div>
                <div class="text-xl text-purple-200">{{workday.schedule.number}}</div>
            </a>
        </div> 
        <div class="rounded-lg shadow shadow-lg px-3 py-1 m-3 mb-12 border border-slate-300 bg-zinc-900 hover:bg-zinc-800 hover:ring hover:ring-slate-300 lg:w-[70%]">
            <span class="shrink text-3xl font-semibold text-blue-400 text-shadow"> 
              Schedule
              <span class="text-lg font-light text-white">
                for {{ workday.date}}
              </span>
        </span>
        
        <div class="text text-center">
            {% regroup workday.slots.all by cls as slots_list %}

            {% for cls in slots_list %}

                <div class="grid grid-cols-2 md:grid-cols-3 w-full my-10">
                {% for slot in cls.list %}
                    <a href="{{ slot.url }}">
                        {% if slot.employee %}
                            <span class="badge">{{ slot.shift }}</span>
                            <span class="text-indigo-300 font-light mr-3">{{ slot.employee }}</span> 
                        {% else%}
                            <span class="badge opacity-30 italic">{{ slot.shift }}</span>
                            <span class="mr-3 text-2xs text-zinc-400 font-extrabold bg-opacity-60">NONE</span> 
                        {% endif %}
                    </a>
                {% endfor %}
                </div>
            {% endfor %}
        </div>
        </div>
    </div>


       
        <div class="flex flex-row flex-wrap">
        <div class="grow panel">
            {% if workday.pto.count > 0 %}
                <div class="grid grid-cols-2 w-fc">
                    {% for pto in workday.pto %}
                        <a href="{{ slot.url }}">
                                <span class="rounded px-2 mx-1 text-sm text-slate-700 bg-amber-300">PTO</span>
                                <span class="text-amber-400 font-light mr-3">{{ pto.employee }}</span> 
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <div>No PTO Requests recorded</div>
            {% endif %}
        </div>
        <div class="grow panel">
            {% if workday.tdo.count > 0 %}
                <div class="grid grid-cols-2 w-fc">
                    {% for tdo in workday.tdo %}
                        <a>
                                <span class="rounded px-2 mx-1 text-sm text-zinc-900 bg-amber-600">TDO</span>
                                <span class="text-amber-500 font-light mr-3">{{ tdo.employee }}</span> 
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <div>No Employees have this day templated off.</div>
            {% endif %}
        </div>    
        <div class="grow panel">
            <h2 class="text-2xl font-light">Employees On Deck</h2>
            {% for empl in workday.on_deck %}
                <div class="flex flex-row">
                    <span class="rounded px-2 mx-1 text-sm text-zinc-900 bg-emerald-600">[ON DECK] {{ empl }}</span>
                </div>
            {% endfor %}
        </div>
    </div>




    {% endblock content %}