<!--
SCHEDULE DETAIL VIEW 
``view.scheduleDetail``

-->

{% extends 'base.html' %}
{% load slippers %}


{% block content %}

    <div class="panel text text-center">
        <h1 class="text-3xl text-amber-600 text-bold">

                    {{schedule.year}}-Schedule {{schedule.number}}
                    
        </h1> 
        <h3 class="text-lg text-amber-300 text-light">
        
                    VERSION {{schedule.version}}
                    
        </h3>

        <div class="text-xs text-gray-300 italic">
            {{ schedule.slots.filled.count }} / {{ schedule.slots.all.count }} SLOTS ASSIGNED 
        </div>
    </div>

    <div><a href="{% url 'sch:v1-schedule-detail' schedule.slug %}">ALTERNATE VIEW</a></div>

    <div class="panel text text-center x-overflow-scroll flex flex-col">
    
            <a hx-get="{{ schedule.url__solve }}" data-hx-confirm="Solving will take 2-3 minutes. Confirm to Continue." 
                hx-trigger="click"
                class="bg-slate-800 hover:bg-slate-600 border-green-200 rounded m-1 text-green-200 hover:text-green-400 hover:ring-2 hover:ring-green-300">
            SOLVE (Quasi-algorithmic method) </a>

            <a hx-get="{{ schedule.url__solve_b }}" data-hx-confirm="Solving will take 2-3 minutes. Confirm to Continue." 
                hx-trigger="click"
                class="bg-slate-800 hover:bg-slate-600 border-green-200 rounded m-1 text-green-200 hover:text-green-400 hover:ring-2 hover:ring-green-300">
            SOLVE (Machine Learning method) </a>
    
            <a href="{{ schedule.url__clear }}" 
                hx-confirm="Verify You are clearing the Assignments of All Employees on this Schedule Draft."
                class="bg-slate-800 hover:bg-slate-600 border-red-200 rounded m-1 text-red-200 hover:text-red-400 hover:ring-2 hover:ring-yellow-300">
            CLEAR</a>
            
    </div>

  

    <div class="panel">

    {% for period in schedule.periods.all %}

        <h3 class="text-lg text-blue-700 text-semibold">
                    
                    {{ period }}

        </h3>

        <div 
        class="vstack">

            {% for week in period.weeks.all %}
            
                <a href="{{week.url}}">{{week}}</a>

                <div 
                class="hstack">

                    {% for workday in week.workdays.all %}

                            {% #basic_popover title=workday.date   subtitle=workday.weekday    link=workday.url   score=workday.percent %}
                                
                                <div>{{ workday.days_away }} days away </div>
                                
                                <div class="flex flex-wrap">
                                    {% for slot in workday.slots.all %}

                                            {% basic_popover_child title=slot.shift  value=slot.employee %}
                                            
                                    {% endfor %}
                                </div>
                                <div class="text-xs mt-5"> {{ workday.percent }}% FILLED</div>

                            {% /basic_popover %}

                            <div id="popover"></div>

                    {% endfor workday %}

                </div>
            {% endfor week %}

        </div>
    {% endfor period %}
    </div>
    
{% endblock content %}
    