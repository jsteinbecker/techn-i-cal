<!--
SCHEDULE DETAIL VIEW 
``view.scheduleDetail``

-->

{% extends 'base.html' %}
{% load slippers %}


{% block content %}

    <div class="panel text text-center">
        <h1 class="text-3xl text-amber-600 text-bold">

                {{schedule.year}}-Schedule {{schedule.number}}
                    
        </h1> 
        <h3 class="text-lg text-amber-300 text-light">
        
                    VERSION {{schedule.version}}
                    
        </h3>

        <div class="text-xs text-gray-300 italic">

        <output id="weather" 
                name="weather"
                _="on load 
                    remove @hidden from #WarnLowCount when my value 
                    is < 200"
                    value="{{ schedule.slots.filled.count }}">
            {{ schedule.slots.filled.count }} 
            / {{ schedule.slots.all.count }} 
            SLOTS ASSIGNED 
        </output>

        <div 
            id="WarnLowCount" 
            hidden>
        WARNING! 
        LOW COVERAGE!
        </div> 

    </div>

    <div><a href="{% url 'sch:v1-schedule-detail' schedule.pk %}">ALTERNATE VIEW</a></div>
    
    <div>
    <div class="float-right">
            <form method="POST"> {% csrf_token %}
            {{ actionDropdown }}
                {# ACTIONS DROPDOWN BUTTON #} 
                {#______SOLVE W/ALGORITHM___#}
                {#______SOLVE w/MACH.LEARNING___#}
                {#______DELETE SCHEDULE SLOTS___#}
            </form> 
    </div>
    </div>
    <div class="panel">
    
    

    {% for period in schedule.periods.all %}

        <a  href="{{ period.url }}" 
            class="text-lg text-blue-700 text-semibold">        
            {{ period }}
        </a>

        <div 
        class="sm:vstack lg:hstack">

            {% for week in period.weeks.all %}
                <div class="vstack">

                <div><a href="{{week.url}}">{{week}}</a></div>
                
                <div class="hstack">
                    {% for workday in week.workdays.all %}
                    
                    <a href="{{workday.url}}" class="bg-slate-200 rounded-full w-14 h-14 pt-3 text text-center items-center">
                        <div class="text-2xs italic text-slate-700">{{workday.weekday}}</div>
                        <div class="text-slate-900 font-bold jbm">{{workday.percent}}%</div>
                    </a>
                     
                     {% comment %} <div hx-get =  "{% url 'sch:lazy-popover-load' workday.pk %}"
                        hx-trigger ="load">

                                <img class="htmx-indicator"
                                    width="180"
                                    src="/static/img/spinner.svg"/>
                    </div> {% endcomment %}
                    
                    {% endfor workday %}
                </div>
                </div>
            {% endfor week %}

        </div>
    {% endfor period %}
    </div>

    <form method="POST"> {% csrf_token %}
        <h2>Access Employee PTO Management for this schedule</h2>
            
            {{ form }}

        <button type="submit">SUBMIT</button>
    </form>

    
{% endblock content %} 
    