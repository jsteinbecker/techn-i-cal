behavior Slot   
    on dragover or dragenter 
        if $allow.includes(@id) and @current != $emp halt the event 
        else if @current != $emp add .bg-red-300 .bg-opacity-30 .ring .ring-red-600 end 
        end
    on dragover or dragenter 
        if $allow.includes(@id) add .bg-emerald-400 .ring .ring-emerald-300 then 
        set $empCardScondary to me end
        
    on dragleave set $empCardSecondary to `` end
    on dragleave or dragend remove .ring .ring-2 .ring-green-400 
                    .bg-emerald-400 .bg-opacity-80 .ring-emerald-300 
                    .bg-red-300 .ring-red-600 end

    on fetch:beforeRequest(headers) set headers['empId'] to $emp end
    on drop 
        trigger transferemployee on me end
    on hlAllowed if $allow.includes(@id) add .bg-green-600 .ring .ring-green-500 end
    on unhighlight remove .bg-green-600 .ring .ring-green-500 end
    on click 
        if $clickmode == 1
            trigger transferemployee on me then
            wait 20ms then send hidetrash to .trashbin 
            then send unhighlight to .slot then
            remove .fa-fade .fa-beat from me 
            then set $clickmode to 0 then log 
        else if $clickmode == 0
            if $empcard != `` then tell .active-emp-card remove you end
            then put $empcard into .inner-slot in me 
            then send unfocus to .emp-card then
            wait 20ms then send hidetrash to .trashbin 
            then set $clickmode to 1 
            send unhighlight to .slot end
        end
        end
    on transferemployee 
        halt the event then call document.querySelector('.dragging') then 
        set movingEmployee to result then 
        call me.appendChild(movingEmployee) then 
        remove .dragging from movingEmployee then
        remove .ring .ring-2 .ring-green-400
        add .fa-fade .fa-beat to me then
        trigger hidehelper on .helper-btn in me then 
        set shift to [@id] then 
        fetch `slot/${shift}/update/` then 
        remove .fa-fade .fa-beat from me end
    end

behavior TrashBin 
    on dragenter or dragover 
        add .ring .ring-red-200 
        then halt the event then 
        end
    on fetch:beforeRequest(headers) 
        set headers['empId'] to $emp end
    on dragleave 
        remove .ring .ring-red-200 end
    on drop 
        js event.dataTransfer.dropEffect = 'move' end
    on drop 
        set :recieved to true 
        then remove .hidden from me then put `Removing $emp` into #trash-message 
        then tell .dragging remove you then add .fa-fade .fa-beat to me 
        then call event.dataTransfer.getData('text/plain') then put result into me 
        then fetch delete/ 
        then wait 1ms 
        then tell .active-emp-card remove you then
        fetch `/wday/${[@wdi]}/`
        then put result into closest <html/> end
        end
    on click 
        if $clickmode == true
            then remove .hidden from me then put `Removing $emp` into #trash-message 
            then tell .dragging remove you then add .fa-fade .fa-beat to me 
            then fetch delete/ 
            then wait 1ms 
            then tell .active-emp-card remove you then
            fetch `/wday/${[@wdid]}/`
            then put result into closest <html/> end
        end
    end
    on hidetrash 
        if :recieved != true 
            add .hidden to me 
    end